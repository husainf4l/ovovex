{% extends 'modules/base_module.html' %} {% block content %} {% include
'components/sidemenu.html' %}

<div
  class="min-h-screen bg-gray-50 dark:bg-gray-900 ml-64 transition-colors duration-300"
>
  <!-- Top Navigation Bar -->
  <div
    class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 transition-colors duration-300"
  >
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">
          Audit & Compliance
        </h1>
        <span
          class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-sm font-medium rounded-full"
          >SOX Compliant</span
        >
      </div>
      <div class="flex items-center space-x-4">
        <!-- Audit Period Selector -->
        <select
          class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-300"
        >
          <option>Current Year</option>
          <option>Last Year</option>
          <option>Last 2 Years</option>
          <option>All Periods</option>
        </select>
        <!-- Run Audit -->
        <button
          class="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200"
          onclick="runAudit()"
        >
          <i class="fas fa-search mr-2"></i>
          Run Audit
        </button>
        <!-- Theme Toggle -->
        <button
          id="theme-toggle"
          class="p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors duration-300"
        >
          <i class="fas fa-moon text-xl dark:hidden"></i>
          <i class="fas fa-sun text-xl hidden dark:inline"></i>
        </button>
      </div>
    </div>
  </div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-8">
    <!-- Breadcrumb -->
    <nav class="flex mb-6" aria-label="Breadcrumb">
      <ol class="inline-flex items-center space-x-1 md:space-x-3">
        <li class="inline-flex items-center">
          <a
            href="{% url 'dashboard:dashboard' %}"
            class="inline-flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400"
          >
            <i class="fas fa-home mr-2"></i>
            Dashboard
          </a>
        </li>
        <li>
          <div class="flex items-center">
            <i class="fas fa-chevron-right text-gray-400 mx-2"></i>
            <span class="text-sm font-medium text-gray-500 dark:text-gray-400"
              >Audit & Compliance</span
            >
          </div>
        </li>
      </ol>
    </nav>

    <!-- Compliance Overview Cards -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
      <div
        class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"
      >
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 dark:text-gray-400">
              Compliance Score
            </p>
            <p class="text-2xl font-bold text-gray-900 dark:text-gray-100">
              96%
            </p>
          </div>
          <div
            class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center"
          >
            <i class="fas fa-shield-alt text-green-600 dark:text-green-400"></i>
          </div>
        </div>
        <div class="mt-4">
          <div class="flex items-center text-sm">
            <span class="text-green-600 dark:text-green-400 font-medium"
              >+2%</span
            >
            <span class="text-gray-600 dark:text-gray-400 ml-2"
              >from last quarter</span
            >
          </div>
        </div>
      </div>

      <div
        class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"
      >
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 dark:text-gray-400">
              Active Audits
            </p>
            <p class="text-2xl font-bold text-gray-900 dark:text-gray-100">3</p>
          </div>
          <div
            class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center"
          >
            <i class="fas fa-search text-blue-600 dark:text-blue-400"></i>
          </div>
        </div>
        <div class="mt-4">
          <div class="flex items-center text-sm">
            <span class="text-blue-600 dark:text-blue-400 font-medium"
              >2 internal</span
            >
            <span class="text-gray-600 dark:text-gray-400 ml-2"
              >1 external</span
            >
          </div>
        </div>
      </div>

      <div
        class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"
      >
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 dark:text-gray-400">
              Risk Level
            </p>
            <p class="text-2xl font-bold text-gray-900 dark:text-gray-100">
              Low
            </p>
          </div>
          <div
            class="w-12 h-12 bg-yellow-100 dark:bg-yellow-900 rounded-lg flex items-center justify-center"
          >
            <i
              class="fas fa-exclamation-triangle text-yellow-600 dark:text-yellow-400"
            ></i>
          </div>
        </div>
        <div class="mt-4">
          <div class="flex items-center text-sm">
            <span class="text-yellow-600 dark:text-yellow-400 font-medium"
              >4 findings</span
            >
            <span class="text-gray-600 dark:text-gray-400 ml-2">all minor</span>
          </div>
        </div>
      </div>

      <div
        class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"
      >
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 dark:text-gray-400">
              Next Audit
            </p>
            <p class="text-2xl font-bold text-gray-900 dark:text-gray-100">
              Q2
            </p>
          </div>
          <div
            class="w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center"
          >
            <i
              class="fas fa-calendar-alt text-purple-600 dark:text-purple-400"
            ></i>
          </div>
        </div>
        <div class="mt-4">
          <div class="flex items-center text-sm">
            <span class="text-purple-600 dark:text-purple-400 font-medium"
              >March 2026</span
            >
            <span class="text-gray-600 dark:text-gray-400 ml-2"
              >SOX compliance</span
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Audit & Compliance Description -->
    <div
      class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6"
    >
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100 mb-2">
            Comprehensive Audit & Compliance Management
          </h2>
          <p class="text-gray-600 dark:text-gray-400">
            Automated audit trails, regulatory compliance monitoring, risk
            assessment, and continuous controls validation with SOX, GDPR, and
            industry-specific framework support.
          </p>
        </div>
        <div class="flex items-center space-x-3">
          <div class="text-right">
            <div class="text-2xl font-bold text-gray-900 dark:text-gray-100">
              1,247
            </div>
            <div class="text-sm text-gray-600 dark:text-gray-400">
              Audit Logs
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Audit & Compliance Tabs -->
    <div
      class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 mb-6"
    >
      <div class="border-b border-gray-200 dark:border-gray-700">
        <nav class="flex space-x-8 px-6" aria-label="Tabs">
          <button
            class="border-b-2 border-blue-500 py-4 px-1 text-sm font-medium text-blue-600 dark:text-blue-400"
            id="audit-trails-tab"
          >
            Audit Trails
          </button>
          <button
            class="border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"
            id="compliance-status-tab"
          >
            Compliance Status
          </button>
          <button
            class="border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"
            id="risk-assessment-tab"
          >
            Risk Assessment
          </button>
          <button
            class="border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300"
            id="controls-testing-tab"
          >
            Controls Testing
          </button>
        </nav>
      </div>

      <!-- Audit Trails Content -->
      <div id="audit-trails-content" class="p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100">
            Audit Trail Logs
          </h3>
          <div class="flex items-center space-x-2">
            <input
              type="text"
              placeholder="Search logs..."
              class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-300"
            />
            <button
              class="px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
            >
              <i class="fas fa-filter mr-2"></i>
              Filter
            </button>
            <button
              class="px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200"
              onclick="exportAuditData()"
            >
              <i class="fas fa-download mr-2"></i>
              Export
            </button>
          </div>
        </div>

        <div class="space-y-4">
          <!-- Audit Log Entry 1 -->
          <div
            class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800"
          >
            <div class="flex items-start space-x-4">
              <div
                class="w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center flex-shrink-0"
              >
                <i
                  class="fas fa-user-edit text-blue-600 dark:text-blue-400"
                ></i>
              </div>
              <div class="flex-1">
                <div class="flex items-center justify-between mb-2">
                  <h4 class="font-semibold text-gray-900 dark:text-gray-100">
                    Financial Statement Modified
                  </h4>
                  <span
                    class="px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs font-medium rounded-full"
                    >Approved</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  Q4 2025 balance sheet updated with new asset valuations
                </p>
                <div
                  class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"
                >
                  <span
                    >User: Sarah Johnson • Module: Financial Statements • IP:
                    192.168.1.100</span
                  >
                  <span>Dec 15, 2025 • 14:32:15</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Audit Log Entry 2 -->
          <div
            class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800"
          >
            <div class="flex items-start space-x-4">
              <div
                class="w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center flex-shrink-0"
              >
                <i
                  class="fas fa-file-upload text-green-600 dark:text-green-400"
                ></i>
              </div>
              <div class="flex-1">
                <div class="flex items-center justify-between mb-2">
                  <h4 class="font-semibold text-gray-900 dark:text-gray-100">
                    Document Uploaded
                  </h4>
                  <span
                    class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs font-medium rounded-full"
                    >Verified</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  Vendor contract uploaded to Document Management system
                </p>
                <div
                  class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"
                >
                  <span
                    >User: Mike Chen • Module: Documents • File:
                    vendor_contract_2025.pdf</span
                  >
                  <span>Dec 14, 2025 • 09:15:22</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Audit Log Entry 3 -->
          <div
            class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800"
          >
            <div class="flex items-start space-x-4">
              <div
                class="w-10 h-10 bg-yellow-100 dark:bg-yellow-900 rounded-lg flex items-center justify-center flex-shrink-0"
              >
                <i class="fas fa-key text-yellow-600 dark:text-yellow-400"></i>
              </div>
              <div class="flex-1">
                <div class="flex items-center justify-between mb-2">
                  <h4 class="font-semibold text-gray-900 dark:text-gray-100">
                    Access Control Changed
                  </h4>
                  <span
                    class="px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs font-medium rounded-full"
                    >Review Required</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  User permissions modified for Finance department access
                </p>
                <div
                  class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"
                >
                  <span
                    >User: Admin • Module: User Management • Action: Permission
                    Update</span
                  >
                  <span>Dec 13, 2025 • 16:45:08</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Audit Log Entry 4 -->
          <div
            class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800"
          >
            <div class="flex items-start space-x-4">
              <div
                class="w-10 h-10 bg-red-100 dark:bg-red-900 rounded-lg flex items-center justify-center flex-shrink-0"
              >
                <i
                  class="fas fa-exclamation-triangle text-red-600 dark:text-red-400"
                ></i>
              </div>
              <div class="flex-1">
                <div class="flex items-center justify-between mb-2">
                  <h4 class="font-semibold text-gray-900 dark:text-gray-100">
                    Failed Login Attempt
                  </h4>
                  <span
                    class="px-2 py-1 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 text-xs font-medium rounded-full"
                    >Security Alert</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  Multiple failed login attempts detected from unknown IP
                </p>
                <div
                  class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"
                >
                  <span
                    >User: Unknown • Module: Authentication • IP:
                    203.0.113.45</span
                  >
                  <span>Dec 12, 2025 • 23:17:33</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Audit Log Entry 5 -->
          <div
            class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800"
          >
            <div class="flex items-start space-x-4">
              <div
                class="w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center flex-shrink-0"
              >
                <i class="fas fa-cog text-purple-600 dark:text-purple-400"></i>
              </div>
              <div class="flex-1">
                <div class="flex items-center justify-between mb-2">
                  <h4 class="font-semibold text-gray-900 dark:text-gray-100">
                    System Configuration Updated
                  </h4>
                  <span
                    class="px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs font-medium rounded-full"
                    >Approved</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  Audit logging settings updated for enhanced compliance
                </p>
                <div
                  class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"
                >
                  <span
                    >User: System Admin • Module: Settings • Action: Config
                    Update</span
                  >
                  <span>Dec 11, 2025 • 08:30:45</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Pagination -->
        <div class="flex items-center justify-between mt-6">
          <div class="text-sm text-gray-600 dark:text-gray-400">
            Showing 1 to 5 of 1,247 entries
          </div>
          <div class="flex items-center space-x-2">
            <button
              class="px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
              onclick="changePage('prev')"
              id="prev-btn"
            >
              Previous
            </button>
            <button
              class="px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg"
              onclick="changePage(1)"
              id="page-1"
            >
              1
            </button>
            <button
              class="px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
              onclick="changePage(2)"
              id="page-2"
            >
              2
            </button>
            <button
              class="px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
              onclick="changePage(3)"
              id="page-3"
            >
              3
            </button>
            <button
              class="px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
              onclick="changePage('next')"
              id="next-btn"
            >
              Next
            </button>
          </div>
        </div>
      </div>

      <!-- Compliance Status Content -->
      <div id="compliance-status-content" class="p-6 hidden">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100">
            Regulatory Compliance Status
          </h3>
          <div class="flex items-center space-x-2">
            <span
              class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-sm font-medium rounded-full"
              >All Frameworks Compliant</span
            >
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- SOX Compliance -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
              <h4
                class="text-lg font-semibold text-gray-900 dark:text-gray-100"
              >
                SOX Compliance
              </h4>
              <div
                class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center"
              >
                <i
                  class="fas fa-check-circle text-green-600 dark:text-green-400 text-xl"
                ></i>
              </div>
            </div>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Internal Controls</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >98% Effective</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Financial Reporting</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Compliant</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Last Assessment</span
                >
                <span class="text-sm font-bold text-gray-900 dark:text-gray-100"
                  >Nov 2025</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Next Review</span
                >
                <span class="text-sm font-bold text-gray-900 dark:text-gray-100"
                  >Mar 2026</span
                >
              </div>
            </div>
          </div>

          <!-- GDPR Compliance -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
              <h4
                class="text-lg font-semibold text-gray-900 dark:text-gray-100"
              >
                GDPR Compliance
              </h4>
              <div
                class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center"
              >
                <i
                  class="fas fa-shield-alt text-green-600 dark:text-green-400 text-xl"
                ></i>
              </div>
            </div>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Data Protection</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Compliant</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Privacy Policies</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Updated</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Data Subject Rights</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Implemented</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Breach Response</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Ready</span
                >
              </div>
            </div>
          </div>

          <!-- Industry Standards -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
              <h4
                class="text-lg font-semibold text-gray-900 dark:text-gray-100"
              >
                Industry Standards
              </h4>
              <div
                class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center"
              >
                <i
                  class="fas fa-certificate text-blue-600 dark:text-blue-400 text-xl"
                ></i>
              </div>
            </div>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >ISO 27001</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Certified</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >PCI DSS</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Compliant</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >COBIT 5</span
                >
                <span
                  class="text-sm font-bold text-yellow-600 dark:text-yellow-400"
                  >In Progress</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >NIST Framework</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Implemented</span
                >
              </div>
            </div>
          </div>

          <!-- Custom Frameworks -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
              <h4
                class="text-lg font-semibold text-gray-900 dark:text-gray-100"
              >
                Custom Frameworks
              </h4>
              <div
                class="w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center"
              >
                <i
                  class="fas fa-cogs text-purple-600 dark:text-purple-400 text-xl"
                ></i>
              </div>
            </div>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Company Policies</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Enforced</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Industry Regulations</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Monitored</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Audit Procedures</span
                >
                <span
                  class="text-sm font-bold text-green-600 dark:text-green-400"
                  >Documented</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600 dark:text-gray-400"
                  >Risk Assessments</span
                >
                <span class="text-sm font-bold text-blue-600 dark:text-blue-400"
                  >Quarterly</span
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Compliance Timeline -->
        <div
          class="mt-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6"
        >
          <h4
            class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
          >
            Compliance Timeline
          </h4>
          <div class="space-y-4">
            <div class="flex items-start space-x-4">
              <div
                class="w-3 h-3 bg-green-500 rounded-full mt-2 flex-shrink-0"
              ></div>
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <h5 class="font-medium text-gray-900 dark:text-gray-100">
                    SOX Section 404 Assessment
                  </h5>
                  <span class="text-sm text-green-600 dark:text-green-400"
                    >Completed</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400">
                  Internal controls assessment completed successfully
                </p>
                <span class="text-xs text-gray-500 dark:text-gray-400"
                  >November 15, 2025</span
                >
              </div>
            </div>
            <div class="flex items-start space-x-4">
              <div
                class="w-3 h-3 bg-blue-500 rounded-full mt-2 flex-shrink-0"
              ></div>
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <h5 class="font-medium text-gray-900 dark:text-gray-100">
                    GDPR Annual Review
                  </h5>
                  <span class="text-sm text-blue-600 dark:text-blue-400"
                    >In Progress</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400">
                  Annual GDPR compliance review and updates
                </p>
                <span class="text-xs text-gray-500 dark:text-gray-400"
                  >December 2025</span
                >
              </div>
            </div>
            <div class="flex items-start space-x-4">
              <div
                class="w-3 h-3 bg-orange-500 rounded-full mt-2 flex-shrink-0"
              ></div>
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <h5 class="font-medium text-gray-900 dark:text-gray-100">
                    ISO 27001 Recertification
                  </h5>
                  <span class="text-sm text-orange-600 dark:text-orange-400"
                    >Upcoming</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400">
                  Three-year ISO 27001 recertification audit
                </p>
                <span class="text-xs text-gray-500 dark:text-gray-400"
                  >March 2026</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Risk Assessment Content -->
      <div id="risk-assessment-content" class="p-6 hidden">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100">
            Risk Assessment Dashboard
          </h3>
          <div class="flex items-center space-x-2">
            <button
              class="px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200"
            >
              <i class="fas fa-plus mr-2"></i>
              New Assessment
            </button>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Risk Heat Map -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-6">
            <h4
              class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
            >
              Risk Heat Map
            </h4>
            <div class="grid grid-cols-5 gap-2 mb-4">
              <!-- Risk levels represented by colors -->
              <div class="text-xs text-center text-gray-600 dark:text-gray-400">
                Very Low
              </div>
              <div class="text-xs text-center text-gray-600 dark:text-gray-400">
                Low
              </div>
              <div class="text-xs text-center text-gray-600 dark:text-gray-400">
                Medium
              </div>
              <div class="text-xs text-center text-gray-600 dark:text-gray-400">
                High
              </div>
              <div class="text-xs text-center text-gray-600 dark:text-gray-400">
                Very High
              </div>
            </div>
            <div class="space-y-2">
              <div class="flex items-center space-x-2">
                <span class="text-xs w-20 text-gray-600 dark:text-gray-400"
                  >Financial</span
                >
                <div class="flex space-x-1">
                  <div class="w-4 h-4 bg-green-400 rounded"></div>
                  <div class="w-4 h-4 bg-green-400 rounded"></div>
                  <div class="w-4 h-4 bg-yellow-400 rounded"></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                </div>
              </div>
              <div class="flex items-center space-x-2">
                <span class="text-xs w-20 text-gray-600 dark:text-gray-400"
                  >Operational</span
                >
                <div class="flex space-x-1">
                  <div class="w-4 h-4 bg-green-400 rounded"></div>
                  <div class="w-4 h-4 bg-yellow-400 rounded"></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                </div>
              </div>
              <div class="flex items-center space-x-2">
                <span class="text-xs w-20 text-gray-600 dark:text-gray-400"
                  >Compliance</span
                >
                <div class="flex space-x-1">
                  <div class="w-4 h-4 bg-green-400 rounded"></div>
                  <div class="w-4 h-4 bg-green-400 rounded"></div>
                  <div class="w-4 h-4 bg-green-400 rounded"></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                </div>
              </div>
              <div class="flex items-center space-x-2">
                <span class="text-xs w-20 text-gray-600 dark:text-gray-400"
                  >Cybersecurity</span
                >
                <div class="flex space-x-1">
                  <div class="w-4 h-4 bg-yellow-400 rounded"></div>
                  <div class="w-4 h-4 bg-orange-400 rounded"></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                </div>
              </div>
              <div class="flex items-center space-x-2">
                <span class="text-xs w-20 text-gray-600 dark:text-gray-400"
                  >Strategic</span
                >
                <div class="flex space-x-1">
                  <div class="w-4 h-4 bg-green-400 rounded"></div>
                  <div class="w-4 h-4 bg-green-400 rounded"></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                  <div
                    class="w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded"
                  ></div>
                </div>
              </div>
            </div>
            <div class="mt-4 flex justify-center space-x-4 text-xs">
              <div class="flex items-center">
                <div class="w-3 h-3 bg-green-400 rounded mr-1"></div>
                <span class="text-gray-600 dark:text-gray-400">Low Risk</span>
              </div>
              <div class="flex items-center">
                <div class="w-3 h-3 bg-yellow-400 rounded mr-1"></div>
                <span class="text-gray-600 dark:text-gray-400"
                  >Medium Risk</span
                >
              </div>
              <div class="flex items-center">
                <div class="w-3 h-3 bg-orange-400 rounded mr-1"></div>
                <span class="text-gray-600 dark:text-gray-400">High Risk</span>
              </div>
            </div>
          </div>

          <!-- Top Risks -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-6">
            <h4
              class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
            >
              Top Risk Factors
            </h4>
            <div class="space-y-4">
              <div>
                <div class="flex justify-between text-sm mb-1">
                  <span class="text-gray-600 dark:text-gray-400"
                    >Cybersecurity Threats</span
                  >
                  <span class="font-medium text-orange-600 dark:text-orange-400"
                    >High</span
                  >
                </div>
                <div
                  class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2"
                >
                  <div
                    class="bg-orange-600 h-2 rounded-full"
                    style="width: 75%"
                  ></div>
                </div>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                  Potential data breaches and ransomware attacks
                </p>
              </div>
              <div>
                <div class="flex justify-between text-sm mb-1">
                  <span class="text-gray-600 dark:text-gray-400"
                    >Regulatory Changes</span
                  >
                  <span class="font-medium text-yellow-600 dark:text-yellow-400"
                    >Medium</span
                  >
                </div>
                <div
                  class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2"
                >
                  <div
                    class="bg-yellow-600 h-2 rounded-full"
                    style="width: 60%"
                  ></div>
                </div>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                  Upcoming changes in financial reporting standards
                </p>
              </div>
              <div>
                <div class="flex justify-between text-sm mb-1">
                  <span class="text-gray-600 dark:text-gray-400"
                    >Supply Chain Disruptions</span
                  >
                  <span class="font-medium text-yellow-600 dark:text-yellow-400"
                    >Medium</span
                  >
                </div>
                <div
                  class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2"
                >
                  <div
                    class="bg-yellow-600 h-2 rounded-full"
                    style="width: 55%"
                  ></div>
                </div>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                  Dependency on key suppliers and logistics
                </p>
              </div>
              <div>
                <div class="flex justify-between text-sm mb-1">
                  <span class="text-gray-600 dark:text-gray-400"
                    >Market Volatility</span
                  >
                  <span class="font-medium text-green-600 dark:text-green-400"
                    >Low</span
                  >
                </div>
                <div
                  class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2"
                >
                  <div
                    class="bg-green-600 h-2 rounded-full"
                    style="width: 35%"
                  ></div>
                </div>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                  Economic conditions and market fluctuations
                </p>
              </div>
              <div>
                <div class="flex justify-between text-sm mb-1">
                  <span class="text-gray-600 dark:text-gray-400"
                    >Operational Failures</span
                  >
                  <span class="font-medium text-green-600 dark:text-green-400"
                    >Low</span
                  >
                </div>
                <div
                  class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2"
                >
                  <div
                    class="bg-green-600 h-2 rounded-full"
                    style="width: 25%"
                  ></div>
                </div>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                  System downtime and process inefficiencies
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Risk Mitigation Actions -->
        <div class="mt-6 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-6">
          <div class="flex items-start space-x-3">
            <div
              class="w-10 h-10 bg-yellow-100 dark:bg-yellow-900 rounded-lg flex items-center justify-center flex-shrink-0"
            >
              <i
                class="fas fa-exclamation-triangle text-yellow-600 dark:text-yellow-400"
              ></i>
            </div>
            <div>
              <h4 class="font-semibold text-gray-900 dark:text-gray-100 mb-2">
                Recommended Risk Mitigation Actions
              </h4>
              <div class="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                <p>
                  • <strong>Cybersecurity:</strong> Implement multi-factor
                  authentication and regular security training
                </p>
                <p>
                  • <strong>Regulatory Compliance:</strong> Monitor upcoming
                  changes in IFRS and tax regulations
                </p>
                <p>
                  • <strong>Supply Chain:</strong> Develop contingency plans and
                  diversify supplier relationships
                </p>
                <p>
                  • <strong>Operational:</strong> Enhance backup systems and
                  disaster recovery procedures
                </p>
              </div>
              <button
                class="mt-3 px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700 transition-colors duration-200"
              >
                View Full Risk Report
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Controls Testing Content -->
      <div id="controls-testing-content" class="p-6 hidden">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100">
            Internal Controls Testing
          </h3>
          <div class="flex items-center space-x-2">
            <button
              class="px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200"
            >
              <i class="fas fa-play mr-2"></i>
              Run Tests
            </button>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Control Categories -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-6">
            <h4
              class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
            >
              Control Categories
            </h4>
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div
                    class="w-8 h-8 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center"
                  >
                    <i
                      class="fas fa-lock text-green-600 dark:text-green-400"
                    ></i>
                  </div>
                  <div>
                    <div class="font-medium text-gray-900 dark:text-gray-100">
                      Access Controls
                    </div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                      User authentication and authorization
                    </div>
                  </div>
                </div>
                <span
                  class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs font-medium rounded-full"
                  >Passed</span
                >
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div
                    class="w-8 h-8 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center"
                  >
                    <i
                      class="fas fa-calculator text-green-600 dark:text-green-400"
                    ></i>
                  </div>
                  <div>
                    <div class="font-medium text-gray-900 dark:text-gray-100">
                      Financial Controls
                    </div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                      Transaction processing and validation
                    </div>
                  </div>
                </div>
                <span
                  class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs font-medium rounded-full"
                  >Passed</span
                >
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div
                    class="w-8 h-8 bg-yellow-100 dark:bg-yellow-900 rounded-lg flex items-center justify-center"
                  >
                    <i
                      class="fas fa-shield-alt text-yellow-600 dark:text-yellow-400"
                    ></i>
                  </div>
                  <div>
                    <div class="font-medium text-gray-900 dark:text-gray-100">
                      IT Security Controls
                    </div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                      System security and data protection
                    </div>
                  </div>
                </div>
                <span
                  class="px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs font-medium rounded-full"
                  >Review</span
                >
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div
                    class="w-8 h-8 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center"
                  >
                    <i
                      class="fas fa-file-contract text-green-600 dark:text-green-400"
                    ></i>
                  </div>
                  <div>
                    <div class="font-medium text-gray-900 dark:text-gray-100">
                      Compliance Controls
                    </div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                      Regulatory and policy adherence
                    </div>
                  </div>
                </div>
                <span
                  class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs font-medium rounded-full"
                  >Passed</span
                >
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                  <div
                    class="w-8 h-8 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center"
                  >
                    <i
                      class="fas fa-users text-green-600 dark:text-green-400"
                    ></i>
                  </div>
                  <div>
                    <div class="font-medium text-gray-900 dark:text-gray-100">
                      Operational Controls
                    </div>
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                      Process and workflow controls
                    </div>
                  </div>
                </div>
                <span
                  class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs font-medium rounded-full"
                  >Passed</span
                >
              </div>
            </div>
          </div>

          <!-- Testing Results -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-6">
            <h4
              class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
            >
              Recent Test Results
            </h4>
            <div class="space-y-4">
              <div
                class="border border-gray-200 dark:border-gray-600 rounded-lg p-4"
              >
                <div class="flex items-center justify-between mb-2">
                  <h5 class="font-medium text-gray-900 dark:text-gray-100">
                    User Access Review
                  </h5>
                  <span
                    class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs font-medium rounded-full"
                    >Passed</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  Verified user permissions and access controls
                </p>
                <div
                  class="flex justify-between text-xs text-gray-500 dark:text-gray-400"
                >
                  <span>Tested: 247 users</span>
                  <span>Dec 10, 2025</span>
                </div>
              </div>
              <div
                class="border border-gray-200 dark:border-gray-600 rounded-lg p-4"
              >
                <div class="flex items-center justify-between mb-2">
                  <h5 class="font-medium text-gray-900 dark:text-gray-100">
                    Transaction Validation
                  </h5>
                  <span
                    class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs font-medium rounded-full"
                    >Passed</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  Validated 1,200+ financial transactions
                </p>
                <div
                  class="flex justify-between text-xs text-gray-500 dark:text-gray-400"
                >
                  <span>Tested: 1,247 transactions</span>
                  <span>Dec 8, 2025</span>
                </div>
              </div>
              <div
                class="border border-gray-200 dark:border-gray-600 rounded-lg p-4"
              >
                <div class="flex items-center justify-between mb-2">
                  <h5 class="font-medium text-gray-900 dark:text-gray-100">
                    Backup Integrity
                  </h5>
                  <span
                    class="px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs font-medium rounded-full"
                    >Review</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  Backup restoration test identified minor issues
                </p>
                <div
                  class="flex justify-between text-xs text-gray-500 dark:text-gray-400"
                >
                  <span>Tested: 15 backup files</span>
                  <span>Dec 5, 2025</span>
                </div>
              </div>
              <div
                class="border border-gray-200 dark:border-gray-600 rounded-lg p-4"
              >
                <div class="flex items-center justify-between mb-2">
                  <h5 class="font-medium text-gray-900 dark:text-gray-100">
                    Compliance Monitoring
                  </h5>
                  <span
                    class="px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs font-medium rounded-full"
                    >Passed</span
                  >
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  Verified regulatory compliance across all modules
                </p>
                <div
                  class="flex justify-between text-xs text-gray-500 dark:text-gray-400"
                >
                  <span>Tested: 89 controls</span>
                  <span>Dec 3, 2025</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Control Effectiveness -->
        <div
          class="mt-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6"
        >
          <h4
            class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"
          >
            Control Effectiveness Summary
          </h4>
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div class="text-center">
              <div
                class="text-2xl font-bold text-green-600 dark:text-green-400"
              >
                89
              </div>
              <div class="text-sm text-gray-600 dark:text-gray-400">
                Controls Tested
              </div>
              <div class="text-xs text-green-600 dark:text-green-400 mt-1">
                This Quarter
              </div>
            </div>
            <div class="text-center">
              <div
                class="text-2xl font-bold text-green-600 dark:text-green-400"
              >
                96%
              </div>
              <div class="text-sm text-gray-600 dark:text-gray-400">
                Pass Rate
              </div>
              <div class="text-xs text-green-600 dark:text-green-400 mt-1">
                Above Target
              </div>
            </div>
            <div class="text-center">
              <div
                class="text-2xl font-bold text-yellow-600 dark:text-yellow-400"
              >
                4
              </div>
              <div class="text-sm text-gray-600 dark:text-gray-400">
                Items for Review
              </div>
              <div class="text-xs text-yellow-600 dark:text-yellow-400 mt-1">
                Minor Issues
              </div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-blue-600 dark:text-blue-400">
                0
              </div>
              <div class="text-sm text-gray-600 dark:text-gray-400">
                Critical Findings
              </div>
              <div class="text-xs text-blue-600 dark:text-blue-400 mt-1">
                No Issues
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Audit Analytics Chart -->
    <div
      class="mt-6 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"
    >
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100">
          Audit & Compliance Analytics
        </h3>
        <div class="flex items-center space-x-2">
          <select
            class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 transition-colors duration-300"
          >
            <option>Last 6 months</option>
            <option>Last year</option>
            <option>All time</option>
          </select>
        </div>
      </div>

      <!-- Chart Placeholder -->
      <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-8 text-center">
        <div
          class="w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-4"
        >
          <i
            class="fas fa-chart-line text-blue-600 dark:text-blue-400 text-2xl"
          ></i>
        </div>
        <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2">
          Compliance Trends & Audit Activity
        </h4>
        <p class="text-gray-600 dark:text-gray-400 mb-4">
          Interactive visualization of audit logs, compliance scores, risk
          assessments, and control testing results over time
        </p>
        <div class="flex justify-center space-x-4 text-sm">
          <div class="flex items-center">
            <div class="w-3 h-3 bg-green-600 rounded-full mr-2"></div>
            <span class="text-gray-600 dark:text-gray-400"
              >Compliance Score</span
            >
          </div>
          <div class="flex items-center">
            <div class="w-3 h-3 bg-blue-600 rounded-full mr-2"></div>
            <span class="text-gray-600 dark:text-gray-400">Audit Activity</span>
          </div>
          <div class="flex items-center">
            <div class="w-3 h-3 bg-purple-600 rounded-full mr-2"></div>
            <span class="text-gray-600 dark:text-gray-400">Risk Level</span>
          </div>
          <div class="flex items-center">
            <div class="w-3 h-3 bg-orange-600 rounded-full mr-2"></div>
            <span class="text-gray-600 dark:text-gray-400">Control Tests</span>
          </div>
        </div>
      </div>

      <!-- Compliance Metrics -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
        <div class="text-center">
          <div class="text-2xl font-bold text-green-600 dark:text-green-400">
            96%
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-400">
            Overall Compliance
          </div>
          <div class="text-xs text-green-600 dark:text-green-400 mt-1">
            Above Industry Avg
          </div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold text-blue-600 dark:text-blue-400">
            1,247
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-400">
            Audit Events
          </div>
          <div class="text-xs text-blue-600 dark:text-blue-400 mt-1">
            This Quarter
          </div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold text-yellow-600 dark:text-yellow-400">
            Low
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-400">
            Risk Rating
          </div>
          <div class="text-xs text-yellow-600 dark:text-yellow-400 mt-1">
            4 Minor Issues
          </div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold text-purple-600 dark:text-purple-400">
            89
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-400">
            Controls Tested
          </div>
          <div class="text-xs text-purple-600 dark:text-purple-400 mt-1">
            96% Pass Rate
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Tab Switching Script -->
<script>
  // Tab switching functionality
  const auditTabs = [
    "audit-trails-tab",
    "compliance-status-tab",
    "risk-assessment-tab",
    "controls-testing-tab",
  ];
  const auditContents = [
    "audit-trails-content",
    "compliance-status-content",
    "risk-assessment-content",
    "controls-testing-content",
  ];

  auditTabs.forEach((tab, index) => {
    document.getElementById(tab).addEventListener("click", () => {
      // Remove active classes
      auditTabs.forEach((t) => {
        document
          .getElementById(t)
          .classList.remove(
            "border-blue-500",
            "text-blue-600",
            "dark:text-blue-400"
          );
        document
          .getElementById(t)
          .classList.add(
            "border-transparent",
            "text-gray-500",
            "dark:text-gray-400"
          );
      });
      auditContents.forEach((c) =>
        document.getElementById(c).classList.add("hidden")
      );

      // Add active class to clicked tab
      document
        .getElementById(tab)
        .classList.remove(
          "border-transparent",
          "text-gray-500",
          "dark:text-gray-400"
        );
      document
        .getElementById(tab)
        .classList.add(
          "border-blue-500",
          "text-blue-600",
          "dark:text-blue-400"
        );

      // Show corresponding content
      document.getElementById(auditContents[index]).classList.remove("hidden");
    });
  });
</script>

<!-- Theme Toggle Script -->
<script>
  // Theme toggle
  const themeToggle = document.getElementById("theme-toggle");
  themeToggle.addEventListener("click", () => {
    const html = document.documentElement;
    const isDark = html.classList.contains("dark");
    if (isDark) {
      html.classList.remove("dark");
      localStorage.setItem("theme", "light");
    } else {
      html.classList.add("dark");
      localStorage.setItem("theme", "dark");
    }
  });

  // Run audit function
  function runAudit() {
    // Show loading state
    const button = event.target.closest("button");
    const originalText = button.innerHTML;
    button.innerHTML =
      '<i class="fas fa-spinner fa-spin mr-2"></i>Running Audit...';
    button.disabled = true;

    // Simulate API call
    setTimeout(() => {
      button.innerHTML = originalText;
      button.disabled = false;
      showNotification(
        "Audit completed successfully! No critical issues found.",
        "success"
      );
    }, 3000);
  }

  // Export audit data
  function exportAuditData() {
    // Get current active tab
    const activeTab = document.querySelector('[id$="-tab"].border-blue-500');
    let reportType = "audit-trails";

    if (activeTab.id === "compliance-status-tab") {
      reportType = "compliance-status";
    } else if (activeTab.id === "risk-assessment-tab") {
      reportType = "risk-assessment";
    } else if (activeTab.id === "controls-testing-tab") {
      reportType = "controls-testing";
    }

    // Create download link
    const link = document.createElement("a");
    link.href = `/api/audit-compliance/export/?type=${reportType}&format=pdf`;
    link.download = `audit_${reportType}_${
      new Date().toISOString().split("T")[0]
    }.pdf`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

    // Show success message
    showNotification("Audit data exported successfully!", "success");
  }

  // Pagination functionality
  let currentPage = 1;
  const totalPages = 3;

  function changePage(page) {
    if (page === "prev") {
      if (currentPage > 1) {
        currentPage--;
      }
    } else if (page === "next") {
      if (currentPage < totalPages) {
        currentPage++;
      }
    } else {
      currentPage = page;
    }

    // Update button styles
    for (let i = 1; i <= totalPages; i++) {
      const btn = document.getElementById(`page-${i}`);
      if (i === currentPage) {
        btn.className =
          "px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg";
      } else {
        btn.className =
          "px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200";
      }
    }

    // Update prev/next button states
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");

    if (currentPage === 1) {
      prevBtn.disabled = true;
      prevBtn.classList.add("opacity-50", "cursor-not-allowed");
    } else {
      prevBtn.disabled = false;
      prevBtn.classList.remove("opacity-50", "cursor-not-allowed");
    }

    if (currentPage === totalPages) {
      nextBtn.disabled = true;
      nextBtn.classList.add("opacity-50", "cursor-not-allowed");
    } else {
      nextBtn.disabled = false;
      nextBtn.classList.remove("opacity-50", "cursor-not-allowed");
    }

    // Update pagination info
    const paginationInfo = document.querySelector(
      ".text-sm.text-gray-600.dark\\:text-gray-400"
    );
    if (paginationInfo) {
      const startItem = (currentPage - 1) * 5 + 1;
      const endItem = Math.min(currentPage * 5, 1247);
      paginationInfo.textContent = `Showing ${startItem} to ${endItem} of 1,247 entries`;
    }

    // Show notification
    showNotification(`Switched to page ${currentPage}`, "info");
  }

  // Notification function
  function showNotification(message, type = "info") {
    // Create notification element
    const notification = document.createElement("div");
    notification.className = `fixed top-4 right-4 px-4 py-2 rounded-lg text-white text-sm font-medium z-50 ${
      type === "success" ? "bg-green-600" : "bg-blue-600"
    }`;
    notification.textContent = message;

    document.body.appendChild(notification);

    // Remove after 3 seconds
    setTimeout(() => {
      document.body.removeChild(notification);
    }, 3000);
  }
</script>

{% endblock %}
