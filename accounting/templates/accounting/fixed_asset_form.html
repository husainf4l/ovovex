{% extends 'base.html' %}
{% load static %}

{% block title %}{{ title }} - Ovovex{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-900 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header -->
        <div class="flex justify-between items-center mb-8">
            <div>
                <h1 class="text-3xl font-bold text-white">{{ title }}</h1>
                <p class="text-gray-400 mt-2">Track and manage company assets and depreciation</p>
            </div>
            <a href="{% url 'accounting:fixed_asset_list' %}"
               class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition">
                <i class="fas fa-arrow-left mr-2"></i>Back to List
            </a>
        </div>

        <!-- Messages -->
        {% if messages %}
            {% for message in messages %}
            <div class="mb-4 p-4 rounded-lg {% if message.tags == 'success' %}bg-green-800/50 border border-green-600{% elif message.tags == 'error' %}bg-red-800/50 border border-red-600{% else %}bg-blue-800/50 border border-blue-600{% endif %}">
                <p class="text-sm">{{ message }}</p>
            </div>
            {% endfor %}
        {% endif %}

        <!-- Fixed Asset Form -->
        <div class="bg-gray-800 rounded-lg shadow-xl border border-gray-700">
            <div class="p-6">
                <form method="post" class="space-y-6">
                    {% csrf_token %}

                    <!-- Basic Information -->
                    <div class="border-b border-gray-700 pb-6">
                        <h3 class="text-lg font-semibold text-white mb-4">Basic Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Asset Code -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Asset Code <span class="text-red-500">*</span>
                                </label>
                                {{ form.asset_code }}
                                {% if form.asset_code.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.asset_code.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Asset Name -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Asset Name <span class="text-red-500">*</span>
                                </label>
                                {{ form.name }}
                                {% if form.name.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.name.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Category -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Category <span class="text-red-500">*</span>
                                </label>
                                {{ form.category }}
                                {% if form.category.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.category.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Account -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Account <span class="text-red-500">*</span>
                                </label>
                                {{ form.account }}
                                {% if form.account.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.account.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Description -->
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Description
                                </label>
                                {{ form.description }}
                                {% if form.description.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.description.errors.0 }}</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Purchase Information -->
                    <div class="border-b border-gray-700 pb-6">
                        <h3 class="text-lg font-semibold text-white mb-4">Purchase Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Purchase Date -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Purchase Date <span class="text-red-500">*</span>
                                </label>
                                {{ form.purchase_date }}
                                {% if form.purchase_date.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.purchase_date.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Purchase Cost -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Purchase Cost <span class="text-red-500">*</span>
                                </label>
                                {{ form.purchase_cost }}
                                {% if form.purchase_cost.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.purchase_cost.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Vendor -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Vendor
                                </label>
                                {{ form.vendor }}
                                {% if form.vendor.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.vendor.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Acquisition Method -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Acquisition Method <span class="text-red-500">*</span>
                                </label>
                                {{ form.acquisition_method }}
                                {% if form.acquisition_method.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.acquisition_method.errors.0 }}</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Asset Details -->
                    <div class="border-b border-gray-700 pb-6">
                        <h3 class="text-lg font-semibold text-white mb-4">Asset Details</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Serial Number -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Serial Number
                                </label>
                                {{ form.serial_number }}
                                {% if form.serial_number.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.serial_number.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Manufacturer -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Manufacturer
                                </label>
                                {{ form.manufacturer }}
                                {% if form.manufacturer.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.manufacturer.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Model -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Model
                                </label>
                                {{ form.model }}
                                {% if form.model.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.model.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Barcode -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Barcode
                                </label>
                                {{ form.barcode }}
                                {% if form.barcode.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.barcode.errors.0 }}</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Location & Assignment -->
                    <div class="border-b border-gray-700 pb-6">
                        <h3 class="text-lg font-semibold text-white mb-4">Location & Assignment</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Location -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Location
                                </label>
                                {{ form.location }}
                                {% if form.location.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.location.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Department -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Department
                                </label>
                                {{ form.department }}
                                {% if form.department.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.department.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Custodian -->
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Custodian
                                </label>
                                {{ form.custodian }}
                                {% if form.custodian.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.custodian.errors.0 }}</p>
                                {% endif %}
                                <p class="mt-1 text-xs text-gray-500">Person responsible for this asset</p>
                            </div>
                        </div>
                    </div>

                    <!-- Depreciation -->
                    <div class="border-b border-gray-700 pb-6">
                        <h3 class="text-lg font-semibold text-white mb-4">Depreciation</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Is Depreciated -->
                            <div class="md:col-span-2">
                                <label class="flex items-center">
                                    {{ form.is_depreciated }}
                                    <span class="ml-2 text-sm text-gray-300">This asset is subject to depreciation</span>
                                </label>
                                {% if form.is_depreciated.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.is_depreciated.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Depreciation Method -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Depreciation Method <span class="text-red-500">*</span>
                                </label>
                                {{ form.depreciation_method }}
                                {% if form.depreciation_method.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.depreciation_method.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Useful Life Years -->
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Useful Life (Years) <span class="text-red-500">*</span>
                                </label>
                                {{ form.useful_life_years }}
                                {% if form.useful_life_years.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.useful_life_years.errors.0 }}</p>
                                {% endif %}
                            </div>

                            <!-- Salvage Value -->
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                    Salvage Value
                                </label>
                                {{ form.salvage_value }}
                                {% if form.salvage_value.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.salvage_value.errors.0 }}</p>
                                {% endif %}
                                <p class="mt-1 text-xs text-gray-500">Estimated value at end of useful life</p>
                            </div>
                        </div>
                    </div>

                    <!-- Status & Notes -->
                    <div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <!-- Is Active -->
                            <div>
                                <label class="flex items-center">
                                    {{ form.is_active }}
                                    <span class="ml-2 text-sm text-gray-300">Asset is active</span>
                                </label>
                                {% if form.is_active.errors %}
                                    <p class="mt-1 text-sm text-red-400">{{ form.is_active.errors.0 }}</p>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Notes -->
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">
                                Notes
                            </label>
                            {{ form.notes }}
                            {% if form.notes.errors %}
                                <p class="mt-1 text-sm text-red-400">{{ form.notes.errors.0 }}</p>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="flex justify-end space-x-4 border-t border-gray-700 pt-6">
                        <a href="{% url 'accounting:fixed_asset_list' %}"
                           class="px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition">
                            Cancel
                        </a>
                        <button type="submit"
                                class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition">
                            <i class="fas fa-save mr-2"></i>{{ action }} Asset
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Help Section -->
        <div class="mt-6 bg-blue-900/30 border border-blue-700 rounded-lg p-4">
            <h4 class="text-sm font-semibold text-blue-300 mb-2">
                <i class="fas fa-info-circle mr-2"></i>Fixed Asset Tips
            </h4>
            <ul class="text-sm text-blue-200 space-y-1 list-disc list-inside">
                <li>Asset code is a unique identifier for tracking purposes</li>
                <li>Useful life is the estimated period the asset will be in service</li>
                <li>Salvage value is the estimated residual value at the end of useful life</li>
                <li>Depreciation is automatically calculated based on the method selected</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
